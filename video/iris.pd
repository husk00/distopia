#N canvas 1 84 1364 682 10;
#X declare -path pdmtl;
#X declare -lib pix_freenect;
#X declare -path abs;
#X declare -path mapping;
#N canvas 634 383 450 300 freenect 1;
#X obj -359 116 gemhead;
#N canvas 1 398 827 305 properties 1;
#X obj 95 235 outlet;
#X obj 3 -6 cnv 15 140 220 empty empty empty 20 12 0 14 -204800 -66577
0;
#X msg 8 178 led \$1;
#X obj 8 59 vradio 15 1 0 6 empty empty empty 0 -8 0 10 -262144 -1
-1 0;
#X floatatom 8 155 5 0 0 0 - - -;
#X msg 85 178 angle \$1;
#X obj 85 23 vsl 15 128 -30 30 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 0 1;
#X floatatom 85 159 5 0 0 0 - - -;
#X msg 85 -2 0;
#X text 24 73 GREEN;
#X text 25 57 OFF;
#X text 24 89 RED;
#X text 24 104 YELLOW;
#X text 24 119 BLINK_GR;
#X text 24 133 BLINK_R_Y;
#X obj 149 84 cnv 15 320 120 empty empty empty 20 12 0 14 -4034 -66577
0;
#X obj 160 121 vradio 15 1 0 2 empty empty empty 0 -8 0 10 -262144
-1 -1 0;
#X floatatom 160 156 5 0 0 0 - - -;
#X obj 225 122 vradio 15 1 0 2 empty empty empty 0 -8 0 10 -262144
-1 -1 0;
#X floatatom 225 157 5 0 0 0 - - -;
#X msg 287 179 audio \$1;
#X obj 287 123 vradio 15 1 0 2 empty empty empty 0 -8 0 10 -262144
-1 -1 0;
#X floatatom 287 158 5 0 0 0 - - -;
#X msg 160 177 rgb \$1;
#X msg 225 178 depth \$1;
#X text 152 84 activate/deactivate streams;
#X text 306 120 OFF;
#X text 306 134 ON;
#X text 154 98 save cpu power by just activating necessary streams!
;
#X obj 477 85 cnv 15 315 120 empty empty empty 20 12 0 14 -232576 -66577
0;
#X obj 480 94 vradio 15 1 0 4 empty empty empty 0 -8 0 10 -262144 -1
-1 1;
#X floatatom 480 159 5 0 0 0 - - -;
#X msg 480 179 depth_output \$1;
#X text 500 92 Color -> best for visual representation;
#X text 630 148 b = 0 \, a = 0;
#X text 303 -23 properties for pix_freenect;
#X text 498 62 DEPTH OUTPUT;
#X text 171 63 STREAMS;
#X text 26 -25 LED \, ANGLE;
#X text 629 135 r->3 msbits \, g ->8 lsbits;
#X text 501 108 Grayscale -> easy to handle;
#X text 502 138 Raw YUV (2 bytes) |;
#X text 502 123 Raw RGBA -> 11 bit output in r&g channel;
#N canvas 551 499 894 267 libfreenect_modes 0;
#X msg 548 182 video_mode \$1;
#X obj 548 51 vradio 15 1 0 7 empty empty empty 0 -8 0 10 -262144 -1
-1 0;
#X floatatom 548 161 5 0 0 0 - - -;
#X msg 150 178 depth_mode \$1;
#X obj 150 50 vradio 15 1 0 6 empty empty empty 0 -8 0 10 -262144 -1
-1 0;
#X floatatom 150 160 5 0 0 0 - - -;
#X text 8 2 LIBFREENECT MODES:;
#X text 569 80 IR MODE;
#X text 569 51 RGB (use this);
#X obj 150 213 outlet;
#X text 125 2 this is just for experimenting...;
#X text 434 50 FREENECT_VIDEO_RGB;
#X text 422 65 FREENECT_VIDEO_BAYER;
#X text 404 79 FREENECT_VIDEO_IR_10BIT;
#X text 364 94 FREENECT_VIDEO_IR_10BIT_PACKED;
#X text 411 111 FREENECT_VIDEO_YUV_RGB;
#X text 411 125 FREENECT_VIDEO_YUV_RAW;
#X text 423 140 FREENECT_VIDEO_DUMMY;
#X text 24 48 FREENECT_DEPTH_11BIT;
#X text 24 63 FREENECT_DEPTH_10BIT;
#X text -19 78 FREENECT_DEPTH_11BIT_PACKED;
#X text -19 94 FREENECT_DEPTH_10BIT_PACKED;
#X text 42 123 FREENECT_DEPTH_MM;
#X text 67 27 DEPTH MODES;
#X text 530 26 RGB MODES;
#X text 149 27 !!also check depth_output!!;
#X obj 668 114 vradio 15 1 0 3 empty empty empty 0 -8 0 10 -262144
-1 -1 0;
#X floatatom 668 164 5 0 0 0 - - -;
#X msg 668 185 resolution \$1;
#X text 688 128 MEDIUM (default);
#X text 665 91 RGB RESOLUTION;
#X text 688 143 HIGH (restart rgb stream!);
#X text -6 109 FREENECT_DEPTH_REGISTERED;
#X text 688 113 LOW (not displaying correctly);
#X text 172 108 aligned to rgb \, 16 bit [mm] output;
#X text 171 122 unaligned \, 16 bit [mm] output;
#X text 170 47 raw 11 bit depth output;
#X connect 0 0 9 0;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X connect 3 0 9 0;
#X connect 4 0 5 0;
#X connect 5 0 3 0;
#X connect 26 0 27 0;
#X connect 27 0 28 0;
#X connect 28 0 9 0;
#X restore 323 220 pd libfreenect_modes;
#X text 459 220 <- change between raw or mm output \, aligned depth
output \, resolution \, ...;
#X obj 524 24 loadbang;
#X msg 586 49 1;
#X connect 2 0 0 0;
#X connect 3 0 4 0;
#X connect 4 0 2 0;
#X connect 5 0 0 0;
#X connect 6 0 7 0;
#X connect 7 0 5 0;
#X connect 8 0 6 0;
#X connect 16 0 17 0;
#X connect 17 0 23 0;
#X connect 18 0 19 0;
#X connect 19 0 24 0;
#X connect 20 0 0 0;
#X connect 21 0 22 0;
#X connect 22 0 20 0;
#X connect 23 0 0 0;
#X connect 24 0 0 0;
#X connect 30 0 31 0;
#X connect 31 0 32 0;
#X connect 32 0 0 0;
#X connect 43 0 0 0;
#X connect 45 0 46 0;
#X connect 46 0 30 0;
#X restore -451 104 pd properties;
#X obj -242 104 gemhead;
#X text -523 150 output acceleration;
#X msg -524 131 accel;
#X obj -524 83 tgl 15 0 empty empty accel 17 7 0 10 -262144 -1 -1 0
1;
#X obj -524 105 metro 500;
#X text -360 97 gemhead for rgb;
#X text -245 84 and for depth;
#X msg -371 75 bang;
#N canvas 1 95 529 247 audio 0;
#X obj 58 -8 list length;
#X obj 58 12 print rcvd_samples;
#X obj 58 -60 inlet;
#X obj 108 -60 inlet;
#X obj 158 -60 inlet;
#X obj 208 -60 inlet;
#X text 403 -99 to be implemented:;
#X text 32 99 1 on the left side \, 3 on the right side under the grill
;
#X text 29 85 microphones are facing downwards;
#X text 404 -83 resampling in pd;
#X text 254 -20 1: left side mic;
#X text 256 -4 2: right side 1st;
#X text 264 26 4: right side 3rd (right outside);
#X text 259 11 3: right side 2nd;
#X text 49 -105 bang to first inlet outputs a list of samples;
#X text 49 -90 received since last |bang (;
#X text 256 -60 list (float) (float) (float) .......;
#X text 47 114 kinect is running at about 16kHz samplerate;
#X connect 0 0 1 0;
#X connect 2 0 0 0;
#X restore -315 180 pd audio;
#X text -332 72 audio output;
#N canvas 176 428 455 231 acceleration 0;
#X obj 71 34 inlet;
#X obj 71 56 route accel tilt_angle;
#X floatatom 135 87 5 0 0 0 - - -;
#X obj 71 131 unpack 0 0 0;
#X floatatom 51 154 8 0 0 0 - - -;
#X floatatom 105 154 8 0 0 0 - - -;
#X floatatom 160 154 8 0 0 0 - - -;
#X text 68 3 accel message to first inlet outputs accelerator data
at last outlet;
#X text 218 152 accelerometer data for X \, Y \, Z -axis;
#X text 172 87 Raw tilt motor angle encoder information;
#X obj 17 183 expr sqrt($f1*$f1+$f2*$f2+$f3*$f3);
#X floatatom 17 203 5 0 0 0 - - -;
#X text 53 202 gravity acceleration should be 9.81;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 1 0 10 0;
#X connect 1 1 2 0;
#X connect 3 0 4 0;
#X connect 3 1 5 0;
#X connect 3 2 6 0;
#X connect 10 0 11 0;
#X restore -242 178 pd acceleration;
#N canvas 0 22 364 224 init_trick 0;
#X obj 131 39 route 1;
#X obj 131 9 route gem_state;
#X obj 131 69 delay 500;
#X msg 131 103 accel;
#X obj 91 133 outlet;
#X obj 91 -15 inlet;
#X text 22 179 trigger the accelerometer output to start streaming
;
#X text 24 162 a little trick to start the streams;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 5 0 1 0;
#X connect 5 0 4 0;
#X restore -359 136 pd init_trick;
#X obj -359 157 pix_freenect 0 1 1 0;
#X msg -440 177 info;
#X obj -383 210 outlet;
#X obj -481 215 outlet;
#X connect 0 0 13 0;
#X connect 1 0 14 0;
#X connect 2 0 14 1;
#X connect 4 0 14 0;
#X connect 5 0 6 0;
#X connect 6 0 4 0;
#X connect 9 0 14 0;
#X connect 13 0 14 0;
#X connect 14 0 17 0;
#X connect 14 1 16 0;
#X connect 14 2 10 0;
#X connect 14 3 10 1;
#X connect 14 4 10 2;
#X connect 14 5 10 3;
#X connect 14 6 12 0;
#X connect 15 0 14 0;
#X restore 684 139 pd freenect;
#X text 868 95 distance;
#X obj 746 222 GLSL/bloom;
#X obj 811 74 hsl 128 15 0 127 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 12700 1;
#X obj 112 157 declare -path pdmtl;
#X obj 111 179 import pix_freenect;
#X obj 112 129 declare -path abs;
#X obj 279 72 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 426 76 loadbang;
#X obj 117 107 declare -path mapping;
#X obj 419 157 bng 15 250 50 0 save empty empty 17 7 0 10 -262144 -1
-1;
#X msg 387 51 dimen 1024 768 offset 800 0 border 0;
#X obj 291 124 gems.win @dimen 640 480 @offset 200 0;
#X msg 426 96 dimen 1024 968 \, offset 1366 0 \, border 0;
#X obj 757 409 videobuffer;
#X obj 547 759 pix_texture;
#N canvas 1 157 450 300 rgbSep 0;
#X obj 148 40 tranche 0;
#X obj 148 61 tranche 2;
#X obj 148 103 tranche 4;
#X obj 148 124 tranche 5;
#X obj 148 82 tranche 3;
#X obj 146 8 inlet;
#X obj 133 203 outlet;
#X connect 0 0 1 0;
#X connect 1 0 4 0;
#X connect 2 0 3 0;
#X connect 3 0 6 0;
#X connect 4 0 2 0;
#X connect 5 0 0 0;
#X restore 551 819 pd rgbSep;
#N canvas 1 134 450 527 GLSL/rgbSep 0;
#X text -452 -1850 Save position;
#X obj -405 -1879 gemhead;
#X obj -405 -1783 glsl_fragment;
#X obj -405 -1671 glsl_program;
#X msg -336 -1618 Tex0 0 \, Tex2 2 \, Tex3 3 \, Tex4 4 \, Tex5 5;
#X msg -330 -1762 link \$1;
#X obj -346 -1879 loadbang;
#X msg -346 -1858 open abs/rainbow-delay.frag;
#X obj -266 -1806;
#X obj -394 -1920 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
0 1;
#X floatatom -158 -1805 5 0 0 0 - - -;
#X obj -434 -1926 inlet;
#X text -230 -1514 this patch is from;
#X obj -430 -1463 rectangle 5.32 4;
#X obj -427 -1509 gems.fit fill;
#X obj -473 -1632 gemhead;
#X obj -404 -1645 translateXYZ 0 0 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 1 5 0;
#X connect 3 0 16 0;
#X connect 3 1 4 0;
#X connect 4 0 3 0;
#X connect 5 0 3 0;
#X connect 6 0 7 0;
#X connect 7 0 2 0;
#X connect 9 0 1 0;
#X connect 10 0 16 1;
#X connect 11 0 1 0;
#X connect 14 0 13 0;
#X connect 14 1 13 1;
#X connect 14 2 13 2;
#X connect 16 0 14 0;
#X restore 895 285 pd GLSL/rgbSep;
#X obj 491 973;
#X obj 847 167 pix_duotone 0.3;
#X obj 752 289 pix_motionblur;
#X obj 833 257 hsl 128 15 0 1 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 10400 1;
#X obj 586 397 pix_invert;
#X obj 796 330 gems.sobel;
#X obj 250 321 hsl 128 15 0 1 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 11822 1;
#X floatatom 247 339 5 0 0 0 - - -;
#X floatatom 298 345 5 0 0 0 - - -;
#X obj 399 398 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 175 371 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X text 425 398 quality (high by default);
#X obj 175 339 loadbang;
#X text 390 318 feedback amount;
#X msg 247 301 0.86;
#X text 336 346 feedback direction (default to 0.1):;
#X text 334 360 positive value: feed outward;
#X text 333 376 nagative value: feed inward;
#X obj 207 439 gems.win.feedback;
#X text 194 371 feedback on/off;
#X obj 178 410 tgl 15 0 empty empty empty 0 -6 0 10 -262144 -1 -1 1
1;
#X obj 437 535 pix_opencv_bgsubstract;
#X msg 480 490 set;
#X floatatom 563 486 5 0 0 0 - - -;
#X obj 645 296 pix_multiply;
#X obj 282 582 sel 32;
#X obj 596 673 translateXYZ;
#X floatatom 627 625 5 0 0 0 - - -;
#X obj 529 869 rectangle 5 5;
#X obj 689 368 switch 2;
#X obj 533 252 hradio 15 1 0 8 empty empty empty 0 -8 0 10 -262144
-1 -1 1;
#X floatatom 747 720 5 0 0 0 - - -;
#X obj 572 314 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X floatatom 662 570 5 0 0 0 - - -;
#X obj 573 709 scaleXYZ 0.8 0.8 1;
#X connect 0 0 42 0;
#X connect 0 1 2 0;
#X connect 2 0 20 0;
#X connect 3 0 2 1;
#X connect 7 0 12 0;
#X connect 8 0 13 0;
#X connect 11 0 12 1;
#X connect 13 0 12 1;
#X connect 14 0 39 0;
#X connect 15 0 16 0;
#X connect 16 0 46 0;
#X connect 20 0 47 2;
#X connect 21 0 20 1;
#X connect 24 0 25 0;
#X connect 25 0 36 2;
#X connect 26 0 36 3;
#X connect 27 0 36 4;
#X connect 28 0 36 1;
#X connect 30 0 28 0;
#X connect 32 0 24 0;
#X connect 38 0 36 0;
#X connect 39 0 44 0;
#X connect 40 0 39 0;
#X connect 41 0 39 1;
#X connect 42 0 47 1;
#X connect 44 0 52 0;
#X connect 45 0 44 1;
#X connect 47 0 14 0;
#X connect 48 0 47 0;
#X connect 48 0 50 0;
#X connect 50 0 40 0;
#X connect 51 0 44 2;
#X connect 52 0 15 0;
